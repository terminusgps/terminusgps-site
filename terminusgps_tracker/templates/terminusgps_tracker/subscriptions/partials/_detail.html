{% load terminusgps_tracker_display %}
<section id="subscription" class="flex flex-col gap-4 rounded border-2 p-4">
    {% if subscription != None %}
    <div class="flex items-center justify-between text-lg">
        <h2 class="font-semibold">{{ subscription.tier.name }} Subscription</h2>
        <div class="flex flex-col items-center font-light tracking-wide">
            <h3>${{ subscription.tier.amount }}/mo<h3>
            <h3 class="text-sm">+tax</h3>
        </div>
    </div>
    {% with paymentProfile.payment.creditCard as cc %}
    <div id="payment-method">
        <h2>Payment Method</h2>
        <div class="flex items-center gap-2">
            <p>{{ addressProfile.firstName }} {{ addressProfile.lastName }}</p>
            <div class="flex items-center gap-2">
                {{ cc.cardType|credit_card_icon }}
                <p>{{ cc.cardNumber|cut:'XXXX' }}</p>
            </div>
        </div>
    </div>
    {% endwith %}
    <div id="shipping-address">
        <h2>Shipping Address</h2>
        <div class="mt-2 flex items-center gap-2">
            <p>{{ addressProfile.firstName }} {{ addressProfile.lastName }}</p>
            <p>{{ addressProfile.address }}</p>
        </div>
    </div>
    <div class="flex flex-col gap-2">
        <input class="w-full cursor-pointer rounded border border-current bg-terminus-red-800 p-2 text-center text-white transition-colors duration-300 ease-in-out hover:bg-terminus-red-400" type="button" value="Update">
        <input class="w-full cursor-pointer rounded border border-current bg-gray-50 p-2 text-center text-red-800 transition-colors duration-300 ease-in-out hover:bg-red-50" type="button" value="Cancel" hx-delete="{% url 'tracker:subscription detail' %}" hx-target="#subscription" hx-confirm="Are you sure you want to cancel your '{{ subscription.tier.name }}' subscription?">
    </div>
    {% else %}
    <p>You aren't subscribed yet.</p>
    <a href="{% url 'tracker:subscription create' %}">Subscribe</a>
    {% endif %}
</section>
